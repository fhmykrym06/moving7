<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حجز خدمة نقل العفش | طلب عرض سعر مجاني</title>
    <meta name="description" content="احجز خدمة نقل العفش واحصل على عرض سعر مجاني من أفضل الشركات في جدة. نموذج بسيط وسريع للحجز المباشر.">
    <meta name="keywords" content="حجز نقل عفش, طلب عرض سعر, حجز شركة نقل, نقل اثاث جدة">
    
    <!-- Open Graph -->
    <meta property="og:title" content="حجز خدمة نقل العفش في جدة">
    <meta property="og:description" content="احجز الآن واحصل على عرض سعر مجاني">
    <meta property="og:image" content="public/images/furniture_moving_services_jeddah_professionals.jpg">
    <meta property="og:type" content="website">
    
    <!-- Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <style>
        :root {
            --primary-blue: #1A237E;
            --secondary-blue: #42A5F5;
            --gold: #FFD700;
            --light-gray: #F5F5F5;
            --dark-gray: #333333;
            --success-green: #4CAF50;
            --warning-red: #F44336;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--light-gray);
            color: var(--dark-gray);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--gold);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-link:hover {
            color: var(--gold);
        }

        /* Page Header */
        .page-header {
            background: linear-gradient(rgba(26, 35, 126, 0.9), rgba(66, 165, 245, 0.9)), 
                        url('public/images/furniture_moving_services_jeddah_professionals.jpg') center/cover;
            color: white;
            padding: 4rem 0;
            text-align: center;
        }

        .page-title {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .page-subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .benefits-list {
            display: flex;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
        }

        .benefit-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }

        .benefit-icon {
            color: var(--gold);
            font-size: 1.5rem;
        }

        /* Main Content */
        .main-content {
            padding: 4rem 0;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
        }

        .booking-form {
            background: white;
            border-radius: 15px;
            padding: 3rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .form-title {
            color: var(--primary-blue);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            text-align: center;
        }

        .form-steps {
            display: flex;
            justify-content: center;
            margin-bottom: 3rem;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--light-gray);
            color: var(--dark-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            transition: all 0.3s;
        }

        .step-number.active {
            background: var(--primary-blue);
            color: white;
        }

        .step-number.completed {
            background: var(--success-green);
            color: white;
        }

        .step-line {
            width: 50px;
            height: 2px;
            background: var(--light-gray);
            margin: 0 1rem;
        }

        .step-line.completed {
            background: var(--success-green);
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .section-title {
            color: var(--primary-blue);
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: var(--dark-gray);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .required {
            color: var(--warning-red);
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--light-gray);
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Tajawal', sans-serif;
            transition: border-color 0.3s;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            border: 2px solid var(--light-gray);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-item:hover {
            border-color: var(--primary-blue);
        }

        .checkbox-item.selected {
            border-color: var(--primary-blue);
            background: var(--light-gray);
        }

        .checkbox-item input {
            display: none;
        }

        .date-time-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            background: var(--secondary-blue);
        }

        .btn-primary:disabled {
            background: var(--light-gray);
            cursor: not-allowed;
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
        }

        .btn-secondary:hover {
            background: var(--primary-blue);
            color: white;
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .sidebar-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .sidebar-title {
            color: var(--primary-blue);
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .company-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .company-logo {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            object-fit: cover;
        }

        .company-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .rating-stars {
            display: flex;
            gap: 0.2rem;
        }

        .star {
            color: var(--gold);
        }

        .price-estimate {
            background: var(--light-gray);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
        }

        .price-amount {
            font-size: 2rem;
            font-weight: 700;
            color: var(--success-green);
            margin-bottom: 0.5rem;
        }

        .price-note {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .features-list {
            list-style: none;
            margin-top: 1rem;
        }

        .features-list li {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
        }

        .feature-icon {
            color: var(--success-green);
        }

        .trust-indicators {
            display: grid;
            gap: 1rem;
            margin-top: 1rem;
        }

        .trust-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem;
            background: var(--light-gray);
            border-radius: 10px;
        }

        .trust-icon {
            color: var(--primary-blue);
            font-size: 1.5rem;
        }

        /* Success Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 3rem;
            border-radius: 15px;
            text-align: center;
            max-width: 500px;
            margin: 0 20px;
        }

        .modal-icon {
            font-size: 4rem;
            color: var(--success-green);
            margin-bottom: 1rem;
        }

        .modal-title {
            color: var(--primary-blue);
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .modal-text {
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .page-title {
                font-size: 2rem;
            }
            
            .benefits-list {
                gap: 1rem;
                flex-direction: column;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .date-time-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-links {
                display: none;
            }
            
            .booking-form {
                padding: 2rem;
            }
        }
    </style>
</head>
<body x-data="bookingApp()">
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <i class="fas fa-star"></i> نقل العفش جدة
            </a>
            <nav class="nav-links">
                <a href="index.html" class="nav-link">الرئيسية</a>
                <a href="companies.html" class="nav-link">دليل الشركات</a>
                <a href="compare.html" class="nav-link">مقارنة</a>
                <a href="reviews.html" class="nav-link">المراجعات</a>
                <a href="blog/index.html" class="nav-link">المدونة</a>
                <a href="contact.html" class="nav-link">اتصل بنا</a>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1 class="page-title">احجز خدمة نقل العفش</h1>
            <p class="page-subtitle">احصل على عرض سعر مجاني ومخصص خلال دقائق</p>
            
            <div class="benefits-list">
                <div class="benefit-item">
                    <i class="fas fa-gift benefit-icon"></i>
                    <span>عرض سعر مجاني</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-clock benefit-icon"></i>
                    <span>رد خلال 30 دقيقة</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-shield-alt benefit-icon"></i>
                    <span>ضمان الجودة</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-handshake benefit-icon"></i>
                    <span>بدون التزام</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="main-content">
        <div class="container">
            <div class="content-grid">
                <!-- Booking Form -->
                <div class="booking-form">
                    <h2 class="form-title">طلب عرض سعر مخصص</h2>
                    
                    <!-- Progress Steps -->
                    <div class="form-steps">
                        <div class="step">
                            <div class="step-number" :class="{'active': currentStep === 1, 'completed': currentStep > 1}">1</div>
                        </div>
                        <div class="step-line" :class="{'completed': currentStep > 1}"></div>
                        <div class="step">
                            <div class="step-number" :class="{'active': currentStep === 2, 'completed': currentStep > 2}">2</div>
                        </div>
                        <div class="step-line" :class="{'completed': currentStep > 2}"></div>
                        <div class="step">
                            <div class="step-number" :class="{'active': currentStep === 3, 'completed': currentStep > 3}">3</div>
                        </div>
                    </div>

                    <form @submit.prevent="submitForm()">
                        <!-- Step 1: Personal Information -->
                        <div x-show="currentStep === 1" class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-user"></i>
                                معلوماتك الشخصية
                            </h3>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">الاسم الكامل <span class="required">*</span></label>
                                    <input type="text" class="form-input" x-model="form.name" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">رقم الهاتف <span class="required">*</span></label>
                                    <input type="tel" class="form-input" x-model="form.phone" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">البريد الإلكتروني <span class="required">*</span></label>
                                <input type="email" class="form-input" x-model="form.email" required>
                            </div>

                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">المنطقة الحالية <span class="required">*</span></label>
                                    <select class="form-select" x-model="form.fromArea" required>
                                        <option value="">اختر المنطقة</option>
                                        <option value="north">شمال جدة</option>
                                        <option value="south">جنوب جدة</option>
                                        <option value="center">وسط جدة</option>
                                        <option value="east">شرق جدة</option>
                                        <option value="west">غرب جدة</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">المنطقة الجديدة <span class="required">*</span></label>
                                    <select class="form-select" x-model="form.toArea" required>
                                        <option value="">اختر المنطقة</option>
                                        <option value="north">شمال جدة</option>
                                        <option value="south">جنوب جدة</option>
                                        <option value="center">وسط جدة</option>
                                        <option value="east">شرق جدة</option>
                                        <option value="west">غرب جدة</option>
                                    </select>
                                </div>
                            </div>

                            <button type="button" class="btn btn-primary" @click="nextStep()">
                                التالي <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>

                        <!-- Step 2: Moving Details -->
                        <div x-show="currentStep === 2" class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-home"></i>
                                تفاصيل النقل
                            </h3>
                            
                            <div class="form-group">
                                <label class="form-label">نوع المنزل <span class="required">*</span></label>
                                <div class="checkbox-group">
                                    <template x-for="type in homeTypes" :key="type.value">
                                        <label class="checkbox-item" :class="{'selected': form.homeType === type.value}">
                                            <input type="radio" x-model="form.homeType" :value="type.value" required>
                                            <i :class="type.icon"></i>
                                            <span x-text="type.label"></span>
                                        </label>
                                    </template>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">الخدمات الإضافية</label>
                                <div class="checkbox-group">
                                    <template x-for="service in additionalServices" :key="service.value">
                                        <label class="checkbox-item" :class="{'selected': form.services.includes(service.value)}">
                                            <input type="checkbox" :value="service.value" x-model="form.services">
                                            <i :class="service.icon"></i>
                                            <span x-text="service.label"></span>
                                        </label>
                                    </template>
                                </div>
                            </div>

                            <div class="date-time-grid">
                                <div class="form-group">
                                    <label class="form-label">تاريخ النقل المفضل</label>
                                    <input type="date" class="form-input" x-model="form.preferredDate">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">الوقت المفضل</label>
                                    <select class="form-select" x-model="form.preferredTime">
                                        <option value="">اختر الوقت</option>
                                        <option value="morning">صباحاً (8-12)</option>
                                        <option value="afternoon">بعد الظهر (12-4)</option>
                                        <option value="evening">مساءً (4-8)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">تفاصيل إضافية</label>
                                <textarea class="form-textarea" x-model="form.notes" placeholder="أي تفاصيل أخرى أو طلبات خاصة..."></textarea>
                            </div>

                            <div style="display: flex; gap: 1rem;">
                                <button type="button" class="btn btn-secondary" @click="prevStep()">
                                    <i class="fas fa-arrow-right"></i> السابق
                                </button>
                                <button type="button" class="btn btn-primary" @click="nextStep()" style="flex: 1;">
                                    التالي <i class="fas fa-arrow-left"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Step 3: Confirmation -->
                        <div x-show="currentStep === 3" class="form-section">
                            <h3 class="section-title">
                                <i class="fas fa-check"></i>
                                مراجعة وتأكيد الطلب
                            </h3>

                            <div style="background: var(--light-gray); padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
                                <h4 style="color: var(--primary-blue); margin-bottom: 1rem;">ملخص طلبك:</h4>
                                <div style="display: grid; gap: 0.5rem;">
                                    <div><strong>الاسم:</strong> <span x-text="form.name"></span></div>
                                    <div><strong>الهاتف:</strong> <span x-text="form.phone"></span></div>
                                    <div><strong>النقل من:</strong> <span x-text="getAreaName(form.fromArea)"></span> إلى <span x-text="getAreaName(form.toArea)"></span></div>
                                    <div><strong>نوع المنزل:</strong> <span x-text="getHomeTypeName(form.homeType)"></span></div>
                                    <div x-show="form.services.length > 0"><strong>الخدمات الإضافية:</strong> <span x-text="getServicesNames()"></span></div>
                                    <div x-show="form.preferredDate"><strong>التاريخ المفضل:</strong> <span x-text="form.preferredDate"></span></div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-item" style="justify-content: flex-start;">
                                    <input type="checkbox" x-model="form.agreedToTerms" required>
                                    أوافق على <a href="#" style="color: var(--primary-blue);">الشروط والأحكام</a> وسياسة الخصوصية
                                </label>
                            </div>

                            <div style="display: flex; gap: 1rem;">
                                <button type="button" class="btn btn-secondary" @click="prevStep()">
                                    <i class="fas fa-arrow-right"></i> السابق
                                </button>
                                <button type="submit" class="btn btn-primary" :disabled="isSubmitting" style="flex: 1;">
                                    <span x-show="!isSubmitting">إرسال الطلب <i class="fas fa-paper-plane"></i></span>
                                    <span x-show="isSubmitting">جاري الإرسال...</span>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Sidebar -->
                <div class="sidebar">
                    <!-- Selected Company -->
                    <div class="sidebar-section" x-show="selectedCompany">
                        <h3 class="sidebar-title">
                            <i class="fas fa-building"></i>
                            الشركة المختارة
                        </h3>
                        <div class="company-info">
                            <img :src="selectedCompany?.logo" :alt="selectedCompany?.name" class="company-logo">
                            <div>
                                <h4 x-text="selectedCompany?.name"></h4>
                                <div class="company-rating">
                                    <div class="rating-stars">
                                        <template x-for="i in 5" :key="i">
                                            <i class="fas fa-star star" :class="{'empty': i > selectedCompany?.rating}"></i>
                                        </template>
                                    </div>
                                    <span x-text="selectedCompany?.rating"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="price-estimate">
                            <div class="price-amount">
                                <span x-text="estimatedPrice"></span> ريال
                            </div>
                            <div class="price-note">تقدير أولي للسعر</div>
                        </div>
                    </div>

                    <!-- Features -->
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">
                            <i class="fas fa-star"></i>
                            مميزات الخدمة
                        </h3>
                        <ul class="features-list">
                            <li>
                                <i class="fas fa-check feature-icon"></i>
                                <span>عرض سعر مجاني ومفصل</span>
                            </li>
                            <li>
                                <i class="fas fa-check feature-icon"></i>
                                <span>رد سريع خلال 30 دقيقة</span>
                            </li>
                            <li>
                                <i class="fas fa-check feature-icon"></i>
                                <span>مقارنة عروض متعددة</span>
                            </li>
                            <li>
                                <i class="fas fa-check feature-icon"></i>
                                <span>ضمان جودة الخدمة</span>
                            </li>
                            <li>
                                <i class="fas fa-check feature-icon"></i>
                                <span>متابعة شخصية للطلب</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Trust Indicators -->
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">
                            <i class="fas fa-shield-alt"></i>
                            الأمان والثقة
                        </h3>
                        <div class="trust-indicators">
                            <div class="trust-item">
                                <i class="fas fa-lock trust-icon"></i>
                                <div>
                                    <strong>حماية البيانات</strong>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">معلوماتك محمية بالكامل</div>
                                </div>
                            </div>
                            <div class="trust-item">
                                <i class="fas fa-certificate trust-icon"></i>
                                <div>
                                    <strong>شركات موثقة</strong>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">جميع الشركات مرخصة</div>
                                </div>
                            </div>
                            <div class="trust-item">
                                <i class="fas fa-headset trust-icon"></i>
                                <div>
                                    <strong>دعم على مدار الساعة</strong>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">فريق الدعم متاح دائماً</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Success Modal -->
    <div x-show="showSuccessModal" class="modal" @click.self="showSuccessModal = false">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3 class="modal-title">تم إرسال طلبك بنجاح!</h3>
            <p class="modal-text">
                شكراً لك! تم استلام طلبك وسيتم التواصل معك خلال 30 دقيقة من أفضل الشركات المتاحة.
                <br><br>
                رقم الطلب: <strong x-text="bookingId"></strong>
            </p>
            <button class="btn btn-primary" @click="goHome()">
                العودة للرئيسية
            </button>
        </div>
    </div>

    <script>
        function bookingApp() {
            return {
                currentStep: 1,
                isSubmitting: false,
                showSuccessModal: false,
                bookingId: '',
                estimatedPrice: '800-1200',
                
                selectedCompany: {
                    id: 1,
                    name: 'شركة البراق لنقل العفش',
                    logo: 'public/images/furniture_moving_services_jeddah_professionals.jpg',
                    rating: 4.8
                },

                form: {
                    name: '',
                    phone: '',
                    email: '',
                    fromArea: '',
                    toArea: '',
                    homeType: '',
                    services: [],
                    preferredDate: '',
                    preferredTime: '',
                    notes: '',
                    agreedToTerms: false
                },

                homeTypes: [
                    { value: 'studio', label: 'استوديو', icon: 'fas fa-home' },
                    { value: 'apartment_1br', label: 'شقة غرفة واحدة', icon: 'fas fa-building' },
                    { value: 'apartment_2br', label: 'شقة غرفتين', icon: 'fas fa-building' },
                    { value: 'apartment_3br', label: 'شقة 3 غرف', icon: 'fas fa-building' },
                    { value: 'villa_small', label: 'فيلا صغيرة', icon: 'fas fa-house-user' },
                    { value: 'villa_large', label: 'فيلا كبيرة', icon: 'fas fa-house-user' },
                    { value: 'office', label: 'مكتب', icon: 'fas fa-briefcase' },
                    { value: 'commercial', label: 'تجاري', icon: 'fas fa-store' }
                ],

                additionalServices: [
                    { value: 'packing', label: 'تغليف احترافي', icon: 'fas fa-box' },
                    { value: 'assembly', label: 'فك وتركيب', icon: 'fas fa-tools' },
                    { value: 'storage', label: 'تخزين مؤقت', icon: 'fas fa-warehouse' },
                    { value: 'cleaning', label: 'تنظيف', icon: 'fas fa-broom' },
                    { value: 'insurance', label: 'تأمين إضافي', icon: 'fas fa-shield-alt' },
                    { value: 'express', label: 'خدمة سريعة', icon: 'fas fa-rocket' }
                ],

                init() {
                    // Get company ID from URL if provided
                    const urlParams = new URLSearchParams(window.location.search);
                    const companyId = urlParams.get('company');
                    if (companyId) {
                        this.loadCompanyData(companyId);
                    }
                },

                loadCompanyData(companyId) {
                    // In real app, fetch from API
                    // For now, use default company
                },

                nextStep() {
                    if (this.validateCurrentStep()) {
                        this.currentStep++;
                        this.updatePriceEstimate();
                    }
                },

                prevStep() {
                    this.currentStep--;
                },

                validateCurrentStep() {
                    if (this.currentStep === 1) {
                        return this.form.name && this.form.phone && this.form.email && 
                               this.form.fromArea && this.form.toArea;
                    }
                    if (this.currentStep === 2) {
                        return this.form.homeType;
                    }
                    return true;
                },

                updatePriceEstimate() {
                    // Calculate estimated price based on selections
                    let basePrice = 500;
                    
                    // Price by home type
                    const typePrices = {
                        'studio': 400,
                        'apartment_1br': 600,
                        'apartment_2br': 800,
                        'apartment_3br': 1200,
                        'villa_small': 2000,
                        'villa_large': 3500,
                        'office': 1000,
                        'commercial': 2500
                    };
                    
                    basePrice = typePrices[this.form.homeType] || basePrice;
                    
                    // Add service costs
                    const servicePrices = {
                        'packing': 200,
                        'assembly': 150,
                        'storage': 300,
                        'cleaning': 100,
                        'insurance': 100,
                        'express': 200
                    };
                    
                    let servicesCost = 0;
                    this.form.services.forEach(service => {
                        servicesCost += servicePrices[service] || 0;
                    });
                    
                    const totalMin = basePrice + servicesCost;
                    const totalMax = Math.round(totalMin * 1.4);
                    
                    this.estimatedPrice = `${totalMin}-${totalMax}`;
                },

                async submitForm() {
                    if (!this.form.agreedToTerms) {
                        alert('يرجى الموافقة على الشروط والأحكام');
                        return;
                    }

                    this.isSubmitting = true;

                    try {
                        // Simulate API call
                        await new Promise(resolve => setTimeout(resolve, 2000));
                        
                        this.bookingId = 'BK' + Date.now().toString().substr(-6);
                        this.showSuccessModal = true;
                        
                    } catch (error) {
                        alert('حدث خطأ أثناء إرسال الطلب. يرجى المحاولة مرة أخرى.');
                    } finally {
                        this.isSubmitting = false;
                    }
                },

                getAreaName(value) {
                    const areas = {
                        'north': 'شمال جدة',
                        'south': 'جنوب جدة',
                        'center': 'وسط جدة',
                        'east': 'شرق جدة',
                        'west': 'غرب جدة'
                    };
                    return areas[value] || value;
                },

                getHomeTypeName(value) {
                    const type = this.homeTypes.find(t => t.value === value);
                    return type?.label || value;
                },

                getServicesNames() {
                    return this.form.services
                        .map(service => this.additionalServices.find(s => s.value === service)?.label)
                        .filter(Boolean)
                        .join('، ');
                },

                goHome() {
                    window.location.href = 'index.html';
                }
            }
        }
    </script>
</body>
</html> 